import{t as u,a as v,c as J}from"../chunks/DxE_hgbo.js";import"../chunks/X65t6Fy2.js";import{p as K,z as q,A as M,t as _,s as O,B as e,C as j,l as s,v as r,x as t,w as g,y as V,D as A}from"../chunks/aKHJVnJd.js";import{s as x}from"../chunks/CwkNoWtF.js";import{i as b,s as W}from"../chunks/xk1eHqHQ.js";import{e as X,i as Y}from"../chunks/Ch0s5eEp.js";import{i as Z}from"../chunks/DfOA5sYv.js";import{p as E}from"../chunks/CDXohHnH.js";import{C as aa,a as sa}from"../chunks/BbpnszBd.js";var ea=u('<div class="loading svelte-ji4raj"><i class="fas fa-spinner fa-spin svelte-ji4raj"></i> <span>Searching...</span></div>'),ra=u('<div class="error svelte-ji4raj"><i class="fas fa-exclamation-circle svelte-ji4raj"></i> <span> </span></div>'),ta=u('<div class="no-results svelte-ji4raj"><i class="fas fa-search svelte-ji4raj"></i> <p> </p> <p class="suggestion svelte-ji4raj">Try different keywords or check your spelling</p></div>'),oa=u('<p class="results-count svelte-ji4raj"> </p> <!>',1),ia=u('<div class="search-results svelte-ji4raj"><h1 class="svelte-ji4raj"> </h1> <!></div>');function _a(P,$){K($,!1);const o=j();let f=j([]),y=j(!0),m=j(null);async function z(){e(y,!0),e(m,null);try{const a=await fetch(`/search?q=${encodeURIComponent(s(o))}`);if(!a.ok)throw new Error("Failed to fetch search results");const p=await a.json();e(f,p.results)}catch(a){e(m,a instanceof Error?a.message:"An error occurred while searching"),e(f,[])}finally{e(y,!1)}}q(()=>E,()=>{e(o,E.url.searchParams.get("q")||"")}),q(()=>s(o),()=>{s(o)&&z()}),M(),Z();var w=ia(),C=r(w),B=r(C);t(C);var D=g(C,2);{var F=a=>{var p=ea();v(a,p)},G=(a,p)=>{{var I=i=>{var d=ra(),h=g(r(d),2),k=r(h,!0);t(h),t(d),_(()=>x(k,s(m))),v(i,d)},L=(i,d)=>{{var h=l=>{var c=ta(),n=g(r(c),2),R=r(n);t(n),V(2),t(c),_(()=>x(R,`No results found for "${s(o)??""}"`)),v(l,c)},k=l=>{var c=oa(),n=A(c),R=r(n);t(n);var N=g(n,2);aa(N,{columns:3,children:(Q,la)=>{var S=J(),T=A(S);X(T,1,()=>s(f),Y,(U,H)=>{sa(U,W(()=>s(H)))}),v(Q,S)},$$slots:{default:!0}}),_(()=>x(R,`${s(f).length??""} results found`)),v(l,c)};b(i,l=>{s(f).length===0?l(h):l(k,!1)},d)}};b(a,i=>{s(m)?i(I):i(L,!1)},p)}};b(D,a=>{s(y)?a(F):a(G,!1)})}t(w),_(()=>x(B,`Search Results for "${s(o)??""}"`)),v(P,w),O()}export{_a as component};
